<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <style>
        body {
          text-align: center;
          background-color: rgb(234, 255, 98);
        }
    
        form {
          display: inline-block;
          text-align: left;
        }
    
        div {
          margin-bottom: 10px;
        }
    
        label {
          /* display: inline-block; */
          
          text-align: left;
        }
    
        table,
        th,
        td {
          border: 1px solid black;
          margin-left: auto;
          margin-right: auto;
          text-align: center;
        }
      </style>
</head>
<body>
    <h3>Pina Love.com</h3>
    <form>
        <div class="mb-2">
            <label for="username" class="form-label">Username</label>
            <input type="text" class="form-control" id="username" >
        </div>
        <div class="mb-2">
            <label for="pwd" class="form-label">Password</label>
            <input type="password" class="form-control" id="pwd">
        </div>
        <div class="mb-2">
          <label for="email" class="form-label">Email address</label>
          <input type="email" class="form-control" id="email" aria-describedby="emailHelp">
          <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
        </div>
        <div class="input-group">
            <select class="form-select" id="pref1" aria-label="Example select with button addon">
              <option selected>I am a man</option>
              <option >I am a woman</option>
              
            </select>
        </div>
        <div class="input-group">
            <select class="form-select" id="pref2" aria-label="Example select with button addon">
              <option selected>I want to find women</option>
              <option  >I want to find men</option>
              
            </select>
        </div>

        <div class="mb-2">
            <label for="dob" class="form-label">Birthday</label>
            <input type="text" class="form-control" id="dob" >
        </div>
        <div class="mb-2">
            <label for="height" class="form-label">Height(in cm)</label>
            <input type="number" class="form-control" id="height" >
        </div>
        <button type = "submit" onclick="getUser()" class=" btn btn-primary">Submit</button>
       
      </form>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
      <script>
      function getUser() {
      var newPerson = captureuser();
      console.log(newPerson);
      var postInfo = new XMLHttpRequest();
      postInfo.onreadystatechange = function () {
      if (postInfo.readyState == 4 && postInfo.status == 201) {
      getAllUsersFromServer();
      }
    };
     postInfo.open("POST", "http://localhost:3000/third");
     postInfo.setRequestHeader("Content-Type", "application/json");
     postInfo.send(JSON.stringify(newPerson));
    }

    function captureuser() {
      var person = {
      username: "",
      pwd: "",
      email: "",
      pref1: "",
      pref2: "",
      dob: "",
      height : ""
      };
      for (a in person) {
        person[a] = document.getElementById(a).value;
      }

      console.log(person);
      return person;
    }


    function getAllUsersFromServer() {
      var getInfo = new XMLHttpRequest();
      getInfo.onreadystatechange = function () {
        if (getInfo.readyState == 4 && getInfo.status == 200) {
          users = JSON.parse(getInfo.response);
          displayUsers(JSON.parse(getInfo.response));
        }
      };
      getInfo.open("GET", "http://localhost:3000/third");
      getInfo.send();
    }

    getAllUsersFromServer();
    
      </script>
</body>
</html>